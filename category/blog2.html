<!DOCTYPE html>
<html lang="en">
<head>
		<title>basepi &mdash; Articles in Category Blog</title>
		<meta charset="utf-8" />
		<link rel="profile" href="https://gmpg.org/xfn/11" />
		<link rel="stylesheet" type="text/css" href="https://blog.basepi.net/theme/css/style.css" />
		<link rel='stylesheet' id='oswald-css'  href='https://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all' />
		<style type="text/css">
			body.custom-background { background-color: #f5f5f5; }
		</style>
		<link rel="alternate" type="application/atom+xml"
			title="basepi — Flux Atom"
			href="https://blog.basepi.net/" /> 
		<!--[if lte IE 8]><script src="https://blog.basepi.net/theme/js/html5shiv.js"></script><![endif]-->
</head>

<body class="home blog custom-background single-author" >
	<div id="container">
		<div id="header">
				<h1 id="site-title"><a href="https://blog.basepi.net">basepi</a></h1>
<h2 id="site-description">because base ten is too boring</h2>		</div><!-- /#banner -->
		
		<div id="menu">
			<div class="menu-navigation-container">
				<ul id="menu-navigation" class="menu">
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://blog.basepi.net/pages/archives">Archives</a></li>
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://blog.basepi.net/rss.xml">RSS</a></li>
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://github.com/basepi">Github</a></li>
						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://twitter.com/basepi">Twitter</a></li>

				</ul>
			</div> <!--/#menu-navigation-container-->
		</div><!-- /#menu -->
		
		<div class="page-title">
<div class="page-title">
	<h2>Filed under <span>Blog</span> &hellip;</h2>
</div>
		</div>
	
		<div id="contents">
<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="https://blog.basepi.net/2015/01/mitigating-ghost-with-saltstack/">Jan 27 2015</a></div>
			<div class="comments"><a href="https://blog.basepi.net/2015/01/mitigating-ghost-with-saltstack/#disqus_thread" title="Comment on Mitigating GHOST with SaltStack">comments</a></div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="https://blog.basepi.net/2015/01/mitigating-ghost-with-saltstack/" title="Permalink to Mitigating GHOST with SaltStack" rel="bookmark">Mitigating GHOST with SaltStack</a>
		</h2>
		<div class="entry-content">
			<p>My coworker <a href="https://twitter.com/croldham">CR</a> wrote up a great guide to mitigating the new <a href="http://www.openwall.com/lists/oss-security/2015/01/27/9">GHOST
vulnerability</a> with <a href="http://www.saltstack.com">SaltStack</a>.</p>
<p>Check it out here:
<a href="https://medium.com/@cro/mitigating-ghost-with-salt-2a28b6eb9e4b">Mitigating GHOST with Salt</a></p>
<p>If you haven't already checked out SaltStack, I highly recommend it! You'll
never have to manually patch all of your machines again!</p>
		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="https://blog.basepi.net/2015/01/the-problem-with-the-hobbit-movies/">Jan 03 2015</a></div>
			<div class="comments"><a href="https://blog.basepi.net/2015/01/the-problem-with-the-hobbit-movies/#disqus_thread" title="Comment on The Problem with the Hobbit Movies">comments</a></div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="https://blog.basepi.net/2015/01/the-problem-with-the-hobbit-movies/" title="Permalink to The Problem with the Hobbit Movies" rel="bookmark">The Problem with the Hobbit Movies</a>
		</h2>
		<div class="entry-content">
			<p>I was catching up on my RSS feeds and I found [this review of the last Hobbit
movie by Ars Technica][1]. Sums up my feelings perfectly:</p>
<blockquote>
<p>There's one big thing that doomed these movies from the outset—the fiscally
smart but artistically bankrupt decision to make a single, shortish
children's novel into three feature-length prequel films.</p>
</blockquote>
<p>Artistically bankrupt. Perfect way to put it.</p>
<blockquote>
<p>What these movies desperately need are boundaries, reasons to condense scenes
or cut them out entirely instead of reasons to pile on more. Chopping these
down into a pair of two-and-a-half hour movies would drastically improve the
pacing even if you didn't address the characterization or the tone issues.
You could leave around three hours of slow-motion action sequences, goblin
chases, and Radagast the Brown on the cutting room floor! Sounds great,
doesn't it?</p>
</blockquote>
<p>Couldn't have said it better myself.</p>
		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="https://blog.basepi.net/2014/12/legos-for-girls/">Dec 17 2014</a></div>
			<div class="comments"><a href="https://blog.basepi.net/2014/12/legos-for-girls/#disqus_thread" title="Comment on Legos "For Girls"">comments</a></div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="https://blog.basepi.net/2014/12/legos-for-girls/" title="Permalink to Legos "For Girls"" rel="bookmark">Legos "For Girls"</a>
		</h2>
		<div class="entry-content">
			<p><a href="http://seasonaldepressioncomic.com/2014/12/06/lego-friends/">"This one weird trick that will make all Legos appeal to girls more"</a></p>
<p>So good. And so true.</p>
		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="https://blog.basepi.net/2014/11/fix-linode-manager-repeated-log-out-force-ipv4/">Nov 25 2014</a></div>
			<div class="comments"><a href="https://blog.basepi.net/2014/11/fix-linode-manager-repeated-log-out-force-ipv4/#disqus_thread" title="Comment on Fix Linode Manager Repeated Log-out (Force IPv4)">comments</a></div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="https://blog.basepi.net/2014/11/fix-linode-manager-repeated-log-out-force-ipv4/" title="Permalink to Fix Linode Manager Repeated Log-out (Force IPv4)" rel="bookmark">Fix Linode Manager Repeated Log-out (Force IPv4)</a>
		</h2>
		<div class="entry-content">
			<p>Recently I've been having issues with Linode Manager repeatedly logging me out
every few requests. I figured this was related to ipv4/ipv6 switching, because
sometimes the logout would also trigger a new IP whitelist request, which would
sometimes be ipv4, and sometimes be ipv6.</p>
<p>After a little googling, I found <a href="https://twitter.com/endrift/status/421774360035074049">this twitter conversation</a>:</p>
<blockquote class="twitter-tweet" lang="en"><p><a
href="https://twitter.com/linode">@linode</a> Manager keeps logging me out at
seemingly random intervals, especially when trying to do DNS management. Is
this a known problem?</p>&mdash; Jeffrey Pfau (@endrift) <a
href="https://twitter.com/endrift/status/421774360035074049">January 10,
2014</a></blockquote>

<p><script async src="//platform.twitter.com/widgets.js"
charset="utf-8"></script></p>
<p>Turns out I'm not the only one experiencing this issue. So I decided to set up
<code>dnsmasq</code> as one of the replies mentioned, and force Linode to a single ipv4
address.</p>
<p>Note that these instructions are for OSX (and were tested on Yosemite, 10.10).</p>
<p>First, I installed <code>dnsmasq</code> via <a href="http://brew.sh">Homebrew</a>:</p>
<div class="highlight"><pre><span></span>brew install dnsmasq
</pre></div>


<p>Then, I followed the homebrew instructions to install <code>dnsmasq</code> as a service to
start on startup:</p>
<div class="highlight"><pre><span></span>sudo cp -fv /usr/local/opt/dnsmasq/*.plist /Library/LaunchDaemons
sudo chown root /Library/LaunchDaemons/homebrew.mxcl.dnsmasq.plist
</pre></div>


<p>Now, before we actually start the service, let's get our resolver in place.
OSX allows us to define resolve data for specific addresses using files in
<code>/etc/resolver/</code>. Here is my <code>/etc/resolver/manager.linode.com</code>:</p>
<div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">nameserver 127.0.0.1</span>
</pre></div>


<p>Basically, we're telling the operating system to use our local DNS server
(provided by <code>dnsmasq</code>) for lookups for <code>manager.linode.com</code>.</p>
<p>We also need to configure <code>dnsmasq</code> to force <code>manager.linode.com</code> to a specific
address. First, we need an IPv4 address to work with:</p>
<div class="highlight"><pre><span></span><span class="c1"># dscacheutil -q host -a name manager.linode.com</span>
name: manager.linode.com
ipv6_address: <span class="m">2600</span>:3c00::14
ipv6_address: <span class="m">2600</span>:3c00::34
ipv6_address: <span class="m">2600</span>:3c00::24

name: manager.linode.com
ip_address: <span class="m">69</span>.164.200.204
ip_address: <span class="m">72</span>.14.191.204
ip_address: <span class="m">72</span>.14.180.204
</pre></div>


<p>Then, copy the example configuration into place:</p>
<div class="highlight"><pre><span></span>cp /usr/local/opt/dnsmasq/dnsmasq.conf.example /usr/local/etc/dnsmasq.conf
</pre></div>


<p>and edit <code>/usr/local/etc/dnsmasq.conf</code>, adding this line:</p>
<div class="highlight"><pre><span></span><span class="nv">address</span><span class="o">=</span>/manager.linode.com/72.14.180.204
</pre></div>


<p>Now, start <code>dnsmasq</code>:</p>
<div class="highlight"><pre><span></span>sudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.dnsmasq.plist
</pre></div>


<p>Assuming you did everything right, you should only see one address when you
query again:</p>
<div class="highlight"><pre><span></span>dscacheutil -q host -a name manager.linode.com
name: manager.linode.com
ip_address: <span class="m">72</span>.14.180.204
</pre></div>


<p>I haven't done much on Linode since implementing this fix, but haven't had it
log me out erroneously once yet.</p>
<p>If you have improvements or run into issues, please leave a comment below!</p>
		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="https://blog.basepi.net/2014/11/blog-auto-publish-with-dropbox/">Nov 23 2014</a></div>
			<div class="comments"><a href="https://blog.basepi.net/2014/11/blog-auto-publish-with-dropbox/#disqus_thread" title="Comment on Blog Auto-Publish with Dropbox">comments</a></div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="https://blog.basepi.net/2014/11/blog-auto-publish-with-dropbox/" title="Permalink to Blog Auto-Publish with Dropbox" rel="bookmark">Blog Auto-Publish with Dropbox</a>
		</h2>
		<div class="entry-content">
			<p>This weekend I moved my blog over to <a href="http://getpelican.com">Pelican</a> from
<a href="http://octopress.org">Octopress</a>. I've been very happy with this decision.</p>
<p>But I decided I wanted to go a step further, and set up autopublish. I knew it
could be easily done with a git hook, but I wanted to be able to easily blog
from my iOS devices as well, so I decided to go with <a href="https://db.tt/PNs6kv5z">Dropbox</a>
instead.</p>
<h1>Getting Dropbox</h1>
<p>First, I needed to install Dropbox on my machine. Dropbox provides <a href="https://www.dropbox.com/install?os=lnx">an easy
one-liner</a>:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> ~ <span class="o">&amp;&amp;</span> wget -O - <span class="s2">&quot;https://www.dropbox.com/download?plat=lnx.x86_64&quot;</span> <span class="p">|</span> tar xzf -
</pre></div>


<p>Now, when I first tried to start up dropbox, it gave me a cryptic error, which
I traced back to not having X11 libraries installed. Turns out I just needed
to unset my DISPLAY variable:</p>
<div class="highlight"><pre><span></span><span class="nb">unset</span> DISPLAY
</pre></div>


<p>Now Dropbox will start properly:</p>
<div class="highlight"><pre><span></span>~/.dropbox-dist/dropboxd
</pre></div>


<p>Follow the instructions to get Dropbox authorized on your server, then once
you see the success message, exit using ctrl-c.</p>
<h2>Configure Dropbox as System Service</h2>
<p>Next we need to create an init script for Dropbox. I found an example
<a href="http://www.dropboxwiki.com/tips-and-tricks/install-dropbox-in-an-entirely-text-based-linux-environment#Running_on_system_startup">here</a>. Here's the Ubuntu/Debian script:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="c1">#dropbox service</span>
<span class="nv">DROPBOX_USERS</span><span class="o">=</span><span class="s2">&quot;user1 user2&quot;</span>

<span class="nv">DAEMON</span><span class="o">=</span>.dropbox-dist/dropboxd

start<span class="o">()</span> <span class="o">{</span>
   <span class="nb">echo</span> <span class="s2">&quot;Starting dropbox...&quot;</span>
   <span class="k">for</span> dbuser in <span class="nv">$DROPBOX_USERS</span><span class="p">;</span> <span class="k">do</span>
       <span class="nv">HOMEDIR</span><span class="o">=</span><span class="sb">`</span>getent passwd <span class="nv">$dbuser</span> <span class="p">|</span> cut -d: -f6<span class="sb">`</span>
       <span class="k">if</span> <span class="o">[</span> -x <span class="nv">$HOMEDIR</span>/<span class="nv">$DAEMON</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
           <span class="nv">HOME</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$HOMEDIR</span><span class="s2">&quot;</span> start-stop-daemon -b -o -c <span class="nv">$dbuser</span> -S -u <span class="nv">$dbuser</span> -x <span class="nv">$HOMEDIR</span>/<span class="nv">$DAEMON</span>
       <span class="k">fi</span>
   <span class="k">done</span>
<span class="o">}</span>

stop<span class="o">()</span> <span class="o">{</span>
   <span class="nb">echo</span> <span class="s2">&quot;Stopping dropbox...&quot;</span>
   <span class="k">for</span> dbuser in <span class="nv">$DROPBOX_USERS</span><span class="p">;</span> <span class="k">do</span>
       <span class="nv">HOMEDIR</span><span class="o">=</span><span class="sb">`</span>getent passwd <span class="nv">$dbuser</span> <span class="p">|</span> cut -d: -f6<span class="sb">`</span>
       <span class="k">if</span> <span class="o">[</span> -x <span class="nv">$HOMEDIR</span>/<span class="nv">$DAEMON</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
           start-stop-daemon -o -c <span class="nv">$dbuser</span> -K -u <span class="nv">$dbuser</span> -x <span class="nv">$HOMEDIR</span>/<span class="nv">$DAEMON</span>
       <span class="k">fi</span>
   <span class="k">done</span>
<span class="o">}</span>

status<span class="o">()</span> <span class="o">{</span>
   <span class="k">for</span> dbuser in <span class="nv">$DROPBOX_USERS</span><span class="p">;</span> <span class="k">do</span>
       <span class="nv">dbpid</span><span class="o">=</span><span class="sb">`</span>pgrep -u <span class="nv">$dbuser</span> dropbox<span class="sb">`</span>
       <span class="k">if</span> <span class="o">[</span> -z <span class="nv">$dbpid</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
           <span class="nb">echo</span> <span class="s2">&quot;dropboxd for USER </span><span class="nv">$dbuser</span><span class="s2">: not running.&quot;</span>
       <span class="k">else</span>
           <span class="nb">echo</span> <span class="s2">&quot;dropboxd for USER </span><span class="nv">$dbuser</span><span class="s2">: running (pid </span><span class="nv">$dbpid</span><span class="s2">)&quot;</span>
       <span class="k">fi</span>
   <span class="k">done</span>
<span class="o">}</span>

<span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> in

   start<span class="o">)</span>
       start
       <span class="p">;;</span>
   stop<span class="o">)</span>
       stop
       <span class="p">;;</span>
   restart<span class="p">|</span>reload<span class="p">|</span>force-reload<span class="o">)</span>
       stop
       start
       <span class="p">;;</span>
   status<span class="o">)</span>
       status
       <span class="p">;;</span>
   *<span class="o">)</span>
       <span class="nb">echo</span> <span class="s2">&quot;Usage: /etc/init.d/dropbox {start|stop|reload|force-reload|restart|status}&quot;</span>
       <span class="nb">exit</span> <span class="m">1</span>

<span class="k">esac</span>

<span class="nb">exit</span> <span class="m">0</span>
</pre></div>


<p>Note that when I pulled down that script originally, it had a typo. The DAEMON
line near the top of the file should be <code>.dropbox-dist/dropboxd</code> -- they left
off the trailing <code>d</code> in the version I downloaded.</p>
<p>Place this script in <code>/etc/init.d/dropbox</code>. Replace the <code>DROPBOX_USERS</code> setting
with a space-separate list of users for which you want Dropbox running. Then,
make the file executable and set it to execute on startup:</p>
<div class="highlight"><pre><span></span>sudo chmod +x /etc/init.d/dropbox
sudo update-rc.d dropbox defaults
</pre></div>


<p>Now, start Dropbox again, as a service:</p>
<div class="highlight"><pre><span></span>sudo service dropbox start
</pre></div>


<h2>Selective Sync (Optional)</h2>
<p>I have a very large Dropbox folder, and so only want to sync the Blogs folder
from my Dropbox account.</p>
<p>I downloaded the CLI script mentioned on that installation page:</p>
<div class="highlight"><pre><span></span>wget https://linux.dropbox.com/packages/dropbox.py
</pre></div>


<p>Then, with Dropbox running, I excluded all the directories within the Dropbox
folder, then removed the Blogs folder from the resulting exclusion list:</p>
<div class="highlight"><pre><span></span>./dropbox.py exclude add ~/Dropbox/*
./dropbox.py exclude remove ~/Dropbox/blogs
</pre></div>


<p>Perfect, now I have only my blogs syncing to my server's dropbox folder.</p>
<h1>Autopublish: The Watcher Script</h1>
<p>The automagic regeneration of my blog I modified from <a href="http://code.zoia.org/2014/02/25/pelican-dropbox-automatic-blog-regeneration/">this post</a>.</p>
<p>I'm going to assume you have a working Pelican setup. Assuming you used the
Pelican quickstart, you should have both a <code>pelicanconf.py</code> and a
<code>publishconf.py</code>. The <code>publishconf.py</code> is going to be what we use.</p>
<p>First, you must modify your <code>publishconf.py</code> file such that it can operate from
any directory, rather than relying on relative paths. Thus, you should add your
blog's absolute directory to the Python path inside of that script. Here is my
<code>publishconf.py</code>:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*- #</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="c1"># This file is only used if you use `make publish` or</span>
<span class="c1"># explicitly specify it as your config file.</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="c1">#sys.path.append(os.curdir)</span>
<span class="c1"># This is the directory where your pelican&#39;s</span>
<span class="c1"># configuration files reside</span>
<span class="n">pelicanpath</span> <span class="o">=</span> <span class="s1">&#39;/home/basepi/Dropbox/Blogs/blog.basepi.net&#39;</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pelicanpath</span><span class="p">)</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">curdir</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pelicanconf</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">SITEURL</span> <span class="o">=</span> <span class="s1">&#39;http://blog.basepi.net&#39;</span>
<span class="n">RELATIVE_URLS</span> <span class="o">=</span> <span class="bp">False</span>

<span class="n">FEED_ALL_ATOM</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">CATEGORY_FEED_ATOM</span> <span class="o">=</span> <span class="bp">None</span>

<span class="n">DELETE_OUTPUT_DIRECTORY</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>


<p>These are the key lines:</p>
<div class="highlight"><pre><span></span><span class="n">pelicanpath</span> <span class="o">=</span> <span class="s1">&#39;/home/basepi/Dropbox/Blogs/blog.basepi.net&#39;</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pelicanpath</span><span class="p">)</span>
</pre></div>


<p>Now no matter what my current working directory is, the <code>publishconf.py</code> will
be able to find the files it needs to operate.</p>
<p>Next, I created a publish script, <code>publish.sh</code>:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">PELICAN</span><span class="o">=</span>/usr/bin/pelican
<span class="nv">CONTENT</span><span class="o">=</span>/home/basepi/Dropbox/Blogs/blog.basepi.net/content
<span class="nv">OUTPUT</span><span class="o">=</span>/home/basepi/Dropbox/Blogs/blog.basepi.net/output
<span class="nv">SETTINGS</span><span class="o">=</span>/home/basepi/Dropbox/Blogs/blog.basepi.net/publishconf.py

rm -rf /home/basepi/Dropbox/Blogs/blog.basepi.net/output/*
<span class="nv">$PELICAN</span> <span class="nv">$CONTENT</span> -o <span class="nv">$OUTPUT</span> -s <span class="nv">$SETTINGS</span> <span class="o">||</span> <span class="nb">exit</span> <span class="nv">$?</span>
rsync -r --delete /home/basepi/Dropbox/Blogs/blog.basepi.net/output/ /var/www/blog.basepi.net
</pre></div>


<p>Note the use of <code>|| exit $?</code>. This will cause the script to exit if the retcode
of the pelican command is non-zero. I don't want to publish my blog if there
are problems.</p>
<p>Make this script executable, and then run it to test that things are working.</p>
<p>The final step is to set up the watcher script which will run our publish
script on changes. For this purpose we will be using <a href="https://github.com/splitbrain/Watcher">this watcher
script</a>.</p>
<p>This script, conveniently, is ready to be used as an init script. Take <a href="https://raw.githubusercontent.com/splitbrain/Watcher/master/watcher.py">the
script</a> and put it at <code>/etc/init.d/watcher</code>. Make it executable:</p>
<div class="highlight"><pre><span></span>sudo chmod +x /etc/init.d/watcher
</pre></div>


<p>Now, we need to create the configuration file for the watcher. This file is at
<code>/etc/watcher.ini</code>:</p>
<div class="highlight"><pre><span></span><span class="o">[</span>DEFAULT<span class="o">]</span>

<span class="p">;</span> where to store output
<span class="nv">logfile</span><span class="o">=</span>/var/log/watcher.log

<span class="p">;</span> where to save the PID file
<span class="nv">pidfile</span><span class="o">=</span>/var/run/watcher.pid

<span class="o">[</span>job1<span class="o">]</span>
<span class="nv">watch</span><span class="o">=</span>/home/basepi/Dropbox/Blogs/blog.basepi.net/content
<span class="nv">events</span><span class="o">=</span>modify,create,delete,move
<span class="nv">excluded</span><span class="o">=</span>
<span class="nv">recursive</span><span class="o">=</span><span class="nb">true</span>
<span class="nv">autoadd</span><span class="o">=</span><span class="nb">true</span>
<span class="nv">command</span><span class="o">=</span>/home/basepi/Dropbox/Blogs/blog.basepi.net/publish.sh
</pre></div>


<p>Now we just need to start the watcher:</p>
<div class="highlight"><pre><span></span>sudo service watcher start
</pre></div>


<p>You can tail the log to see if it's working (change a file to trigger it):</p>
<div class="highlight"><pre><span></span>tail -f /var/log/watcher.log
</pre></div>


<p>If everything is in order, just have the watcher start on boot:</p>
<div class="highlight"><pre><span></span>sudo update-rc.d watcher defaults
</pre></div>


<p>And you're done! Now, any time you change the content of your blog, it will be
automatically re-built and published for you!</p>
<p>Let me know what you think in the comments. Or hit me up <a href="http://twitter.com/basepi">on Twitter</a>!</p>
		</div> <!--/#entry-content-->
    		<span class="tag-links"><strong>Tagged</strong>
 <a href="https://blog.basepi.net/tag/automation.html" rel="tag">automation</a>,  <a href="https://blog.basepi.net/tag/blog.html" rel="tag">blog</a>,  <a href="https://blog.basepi.net/tag/dropbox.html" rel="tag">dropbox</a>,  <a href="https://blog.basepi.net/tag/pelican.html" rel="tag">pelican</a>,  <a href="https://blog.basepi.net/tag/tutorial.html" rel="tag">tutorial</a>    		</span>
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="https://blog.basepi.net/2014/11/low-friction/">Nov 21 2014</a></div>
			<div class="comments"><a href="https://blog.basepi.net/2014/11/low-friction/#disqus_thread" title="Comment on Low Friction">comments</a></div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="https://blog.basepi.net/2014/11/low-friction/" title="Permalink to Low Friction" rel="bookmark">Low Friction</a>
		</h2>
		<div class="entry-content">
			<p>It's been a long time.</p>
<p>...again.</p>
<p>I thought that I had a pretty low-friction setup with my new blog on Octopress.
However, that was not the case. This morning I decided I needed to get my blog
back up. There have been a few times in the last couple of years that I wished
I had it available. However, I didn't have any of the dependencies set up on my
new laptop. So I set out to get ruby installed and ready to generate my blog
again.</p>
<p>After an hour of fighting <code>rbenv</code> and <code>bundle</code>, I decided it was finally time
to take the plunge, and switch to a Python-based tool.</p>
<p>I installed <a href="http://getpelican.com">Pelican</a>, and had it generating my new site
from the default skeleton in a few minutes. Granted, I've had to take some more
time choosing a theme and porting my content over. But grand total it's only
taken me an hour or two of tinkering, and should reduce my blogging friction
substantially, both on new machines and on existing setups.</p>
<p>I did port over most of the content from my old blog. I may delete some of it
going forward, mostly out of embarassment.</p>
<p>I lost my old disqus comments -- since there was only one comment on my old
blog, I decided it wasn't worth the potential hassle of making sure it
translated cleanly.</p>
<p>Additionally, the RSS feed is new, so you'll have to <a href="/rss.xml">resubscribe</a>.</p>
<p>So here we are, on the newest edition of
<a href="http://blog.basepi.net">blog.basepi.net</a>. Hope you like it.</p>
		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="https://blog.basepi.net/2013/09/im-back/">Sep 13 2013</a></div>
			<div class="comments"><a href="https://blog.basepi.net/2013/09/im-back/#disqus_thread" title="Comment on I'm Back!">comments</a></div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="https://blog.basepi.net/2013/09/im-back/" title="Permalink to I'm Back!" rel="bookmark">I'm Back!</a>
		</h2>
		<div class="entry-content">
			<p>Well, at long last I got around to re-installing Ruby on my machine, updated
Octopress, and got my blogs settled.  I'm back!</p>
<p>So what's been going on in the interim?  Let's hit the top two:</p>
<ul>
<li>I graduated Magna Cum Laude from the University of Utah with a BS in Computer
  Science.</li>
<li>I switched jobs -- I now work for Salt Stack, Inc, making awesome open source
  software.</li>
</ul>
<p>A lot has changed, and I hope to have much more to blog about now that I'm more
involved in the open source community.  Feel free to throw me feedback!  I
don't pretend to be an awesome blogger.  =)</p>
		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="https://blog.basepi.net/2012/02/why-i-switched-to-octopress/">Feb 09 2012</a></div>
			<div class="comments"><a href="https://blog.basepi.net/2012/02/why-i-switched-to-octopress/#disqus_thread" title="Comment on Why I switched to Octopress">comments</a></div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="https://blog.basepi.net/2012/02/why-i-switched-to-octopress/" title="Permalink to Why I switched to Octopress" rel="bookmark">Why I switched to Octopress</a>
		</h2>
		<div class="entry-content">
			<p>Update, Nov 2014: Since I wrote this blog post, I have ditched Jekyll and
Octopress (mostly because of the pain of setting up Ruby, not because of those
pieces of software themselves). This blog is still static, but is now generated
using Pelican, a Python project.</p>
<h2>The Problem</h2>
<p>Last week I received an e-mail from the RSA Anti-Fraud Command Center.
It related to <a href="http://blog.cmyers.net/">my personal blog</a>:</p>
<blockquote>
<p>It appears that your website cmyers.net has been hacked by a fraudster.  It
is now hosting a phishing attack against RBC.  Please remove the fraudulent
folders/files as soon as possible and secure your website as it has been
compromised.  Please note that it is possible that the fraudulent content is
embedded in your website's legitimate files.</p>
</blockquote>
<p>Great.</p>
<p>It turns out the claim was in fact true.  There were new files in my wp-admin
folder for my wordpress install.  When I loaded these files in a browser, it
looked like the home page for a bank.</p>
<p>I had been hacked.</p>
<p>Turns out it's actually quite a common thing.  WordPress is a common (and
apparently quite easy) target for these types of hacks.  It comes down to a
combination of it's popularity, lack of really security-centric design, and the
fact that it's written in PHP.</p>
<p>I considered a few options.  Do I take the time to properly harden my PHP5
install and reinstall wordpress?  Or do I change systems?</p>
<h2>Enter Jekyll</h2>
<p><a href="http://blog.errstr.com/">My friend Andrew generates his blog</a> using jekyll.  <a href="https://github.com/mojombo/jekyll/wiki">Jekyll</a> is a
"simple, blog aware, static site generator."  It's super-cool, check it out.
However, unlike WordPress, it doesn't have a bunch of built-in themes, or even
a theme directory that I could find.  You have to write your own CSS and HTML
templates, which it uses to generate the site.  But it generates an almost
completely static site -- the exception would be if you build in functionality
for <a href="http://disqus.com/">Disqus</a> comments or put your Twitter roll in the sidebar.</p>
<p>If I was going to switch systems, static is what I was looking for.  The
resulting site is much faster than a WordPress site, and much more secure.  But
I didn't have the time, knowledge, or creativity to create a theme from
scratch, and porting my theme from WordPress would be a many hour project.</p>
<h2>Enter Octopress</h2>
<p>Then I received a tweet from my friend <a href="https://twitter.com/#!/julio_menendez">Julio</a> that said to check out
<a href="http://octopress.org/">Octopress</a>.  It's built on top of Jekyll with built-in support for great
syntax highlighting, Disqus comments, social integration -- everything I was
looking for.  And a great default theme, which I could use as a jumping point
for my own.  I was sold.</p>
<p>The rest is history.  I'll spell out the details in my next post.</p>
		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="https://blog.basepi.net/2012/01/minecraft/">Jan 05 2012</a></div>
			<div class="comments"><a href="https://blog.basepi.net/2012/01/minecraft/#disqus_thread" title="Comment on Minecraft!!!">comments</a></div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="https://blog.basepi.net/2012/01/minecraft/" title="Permalink to Minecraft!!!" rel="bookmark">Minecraft!!!</a>
		</h2>
		<div class="entry-content">
			<p>Update, November 2014: These days, I'm hosting my own vanilla minecraft server
on Linode, using <a href="http://www.mcmyadmin.com">MCMyAdmin</a> for a web interface.</p>
<p>I finally did it.  I broke down and rented a Minecraft server.</p>
<p>Previously, I had hosted a Minecraft server pretty successfully on my personal
web server.  The problem became two-fold:  it was a huge time-sink, as updating
all the plugins that I was running took a long time at each release.  Also,
while hosting the Minecraft server, my server would often become unresponsive,
requiring a restart.  This was unacceptable, as I also host a Teamspeak 3
server, an IRC bouncer, and multiple websites from my server.  I needed maximum
uptime!  So I finally shut down my Minecraft server for good.</p>
<p>But now it's back!  OK, it's not the exact same server -- I didn't bring the
old world over.  I wanted a fresh start.  But it's a Minecraft server, and it's
all mine for the building!  OK, not all mine:  I want you to come too!  If you
already have a Minecraft account, post it in the comments so I can add you to
the user list.  (Otherwise you won't be able to build)  If you've never played
Minecraft, head on over to <a href="http://minecraft.net">minecraft.net</a> and buy the game.  Just do it,
it's worth it.</p>
<p>My server is at mc.basepi.net.  Come and join us in building something awesome!
=)</p>
		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post--><div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="https://blog.basepi.net/2011/12/slide-design-for-developers/">Dec 24 2011</a></div>
			<div class="comments"><a href="https://blog.basepi.net/2011/12/slide-design-for-developers/#disqus_thread" title="Comment on Slide Design for Developers">comments</a></div>
	</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="https://blog.basepi.net/2011/12/slide-design-for-developers/" title="Permalink to Slide Design for Developers" rel="bookmark">Slide Design for Developers</a>
		</h2>
		<div class="entry-content">
			<p><a href="http://zachholman.com/posts/slide-design-for-developers/">This is a great article</a> by a guy over at <a href="https://github.com/">Github</a> about slide design.  He
makes some really good points, and his slides <a href="http://zachholman.com/talk/how-github-uses-github-to-build-github">really are beautiful</a>.  I
want to see more presentations with these design pointers in mind.</p>
		</div> <!--/#entry-content-->
	</div> <!--/#main-->
</div>  <!--/#post--><div class="navigation">
		<div class="nav-previous">
				<a href="https://blog.basepi.net/category/blog.html">
			<span class="meta-nav">&larr;</span> Newer posts</a>
		</div>		
		<div class="nav-next"><a href="https://blog.basepi.net/category/blog3.html" >Older posts <span class="meta-nav">&rarr;</span></a></div>
</div>
		</div>
		
		<div id="footer">
			<p>Powered by <a href="http://getpelican.com">Pelican</a></p>
				<script type="text/javascript">
					var _gaq = _gaq || [];
					_gaq.push(['_setAccount', 'UA-56998543-1']);
					_gaq.push(['_trackPageview']);
					(function() {
						var ga = document.createElement('script'); 
						ga.type = 'text/javascript'; ga.async = true;
						ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
						var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
					})();
				</script>
<script type="text/javascript">
    var disqus_shortname = 'blog-basepi-net';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>		</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>